

+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|   Action   |      Source      |Use Source As |     Dest     | Use Dest As  | Offset  | Length  |                               Result                                |
|            |                  |              |              |              |         |         |                                                                     |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|    pop     |     illegal      |   illegal    |   arrayref   |   illegal    | illegal |         |splice( @$dest, -$length, $length )                                  |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|   shift    |     illegal      |   illegal    |   arrayref   |   illegal    | illegal |         |splice( @$dest, 0, $length)                                          |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|            |       any        |    value     |              |              |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, $length, $source )    |
|            +------------------+--------------+              |              +---------+---------+---------------------------------------------------------------------+
|            |     arrayref     |              | array value  |     idx      |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, $length, @$source )   |
|            +------------------+     ref      |              |              +---------+---------+---------------------------------------------------------------------+
|            |     hashref      |              |              |              |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, $length, %$source )   |
|            +------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
| splice[1]  |       any        |    value     |              |              |         |         |splice( @$dest, $offset, $length, $source )                          |
|            +------------------+--------------+              |              +---------+---------+---------------------------------------------------------------------+
|            |     arrayref     |              |  array ref   |     ref      |         |         |splice( @$dest, $offset, $length, @$source )                         |
|            +------------------+     ref      |              |              +---------+---------+---------------------------------------------------------------------+
|            |     hashref      |              |              |              |         |         |splice( @$dest, $offset, $length, %$source )                         |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|            |       any        |    value     |              |              |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, 0, $source )          |
|            +------------------+--------------+              |              +---------+         +---------------------------------------------------------------------+
|            |     arrayref     |              | array value  |     idx      |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, 0, @$source )         |
|            +------------------+     ref      |              |              +---------+         +---------------------------------------------------------------------+
|            |     hashref      |              |              |              |         |         |splice( @{parent(dest)}, attrs{idx} + $offset, 0, %$source )         |
|            +------------------+--------------+--------------+--------------+---------+         +---------------------------------------------------------------------+
|            |                  |              |              |              |    0    |         |unshift @$dest, $source                                              |
|            |       any        |    value     |              |              +---------+         +---------------------------------------------------------------------+
|            |                  |              |              |              |   -1    |         |push @$dest, $source                                                 |
|            +------------------+--------------+              |              +---------+         +---------------------------------------------------------------------+
|   insert   |                  |              |              |              |    0    | illegal |unshift @$dest, @$source                                             |
|            |     arrayref     |              |  array ref   |     ref      +---------+         +---------------------------------------------------------------------+
|            |                  |              |              |              |   -1    |         |push @$dest, @$source                                                |
|            +------------------+     ref      |              |              +---------+         +---------------------------------------------------------------------+
|            |                  |              |              |              |    0    |         |unshift @$dest, %$source                                             |
|            |     hashref      |              |              |              +---------+         +---------------------------------------------------------------------+
|            |                  |              |              |              |   -1    |         |push @$dest, %$source                                                |
|            +------------------+--------------+--------------+--------------+---------+         +---------------------------------------------------------------------+
|            |     arrayref     |              |              |              |         |         |insert @$source into hash                                            |
|            +------------------+              |   hashref    |     ref      | illegal |         +---------------------------------------------------------------------+
|            |     hashref      |              |              |              |         |         |insert %$source into hash                                            |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|            |                  |              | array value  |              | illegal | illegal |delete parent($dest)->[$dest->attrs{idx}]                            |
|   delete   |     illegal      |   illegal    +--------------+   illegal    +---------+---------+---------------------------------------------------------------------+
|            |                  |              |  hash value  |              | illegal | illegal |delete parent($dest)->{$dest->attrs{key}}                            |
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+
|            |       any        |              |     any      |    value     | illegal | illegal |$dest = $source                                                      |
|            +------------------+              +--------------+--------------+---------+---------+---------------------------------------------------------------------+
|  replace   |      scalar      |   illegal    |              |              | illegal | illegal |parent($dest)->{$source} = parent($dest)->{$dest->atrs{key}}         |
|            +------------------+              |  hash value  |     key      +---------+---------+---------------------------------------------------------------------+
|            |    reference     |              |              |              | illegal | illegal |parent($dest)->{refadder $source} = parent($dest)->{$dest->atrs{key}}|
+------------+------------------+--------------+--------------+--------------+---------+---------+---------------------------------------------------------------------+

Notes
-----

[1] splice action requires at least one of Offset and Length to be specified.

Defaults
--------

* use_source_as = ref $source ? 'ref' : 'value'

splice
======
  use_dest_as = is_arrayref( $dest ) ? 'ref' : defined $idx ? 'idx' : croak;

insert
======
  use_dest_as = is_arrayref( $dest ) | is_hashref( $dest ) ? 'ref' : defined $idx ? 'idx' : croak;


- pop
  - { length: 1 }
- shift
  - { length: 1 }
-splice
  - offset : 0
  - length : undef
-insert
  - offset = 0
-replace
  - target = 'value'